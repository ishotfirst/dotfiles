#!/bin/bash

# Install common software

# Homebrew
# [ -f /usr/local/bin/brew ] || ruby -e "$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/install)"

# BREWS=\
# colordiff \
# git \
# mas \
# nvm \
# openssl \
# phantomjs \
# ruby \
# the_silver_searcher \
# trash \
# z \
# zsh
# [ -f /usr/local/bin/brew ] brew install $BREWS

# Homebrew Cask
# TODO: Use mas instead?
# [ -f /usr/local/bin/brew ] brew tap caskroom/cask && brew tap caskroom/versions

# CASKS=\
# 1password \
# alfred \
# appcleaner \
# atom \
# backblaze \
# daisydisk \
# dash \
# deluge \
# drobo-dashboard \
# dropbox \
# droplr \
# etrecheck \
# firefox \
# google-chrome \
# google-chrome-canary \
# google-drive \
# google-photos-backup \
# hyperterm \
# imageoptim \
# iterm2 \
# kaleidoscope \
# keepingyouawake \
# spotify \
# superduper \
# the-unarchiver
# [ -f /usr/local/bin/brew-cask ] brew cask install $CASKS
#
# NO CASK YET
# https://github.com/caskroom/homebrew-cask/blob/master/CONTRIBUTING.md#adding-a-cask
#
# bettersnaptool
# noteburner-m4v-converter-plus
# photosweeper
# pixelmator
# sim-daltonism
# simplenote
# tweetbot
# wunderlist

# Node
# NPM_MODULES=\
# npm \
# pure-prompt \
# eslint \
# fast-cli
# [ -d $NVM_PATH/versions/node/$(nvm current)/lib/node_modules ] npm install -g $NPM_MODULES

# Gems
# GEMS=\
# jekyll
# [ -f /usr/local/bin/gem ] gem install $GEMS

# [ -d ~/.oh-my-zsh ] || curl -L https://raw.github.com/robbyrussell/oh-my-zsh/master/tools/install.sh | sh

# Setup root Symlinks
[ -h ~/.aliases ] && unlink ~/.aliases
[ -f ~/src/dotfiles/.aliases ] && ln -s ~/src/dotfiles/.aliases ~/.aliases

[ -h ~/.editorconfig ] && unlink ~/.editorconfig
[ -f ~/src/dotfiles/.editorconfig ] && ln -s ~/src/dotfiles/.editorconfig ~/.editorconfig

[ -h ~/.gitconfig ] && unlink ~/.gitconfig
[ -f ~/src/dotfiles/.gitconfig ] && ln -s ~/src/dotfiles/.gitconfig ~/.gitconfig

[ -h ~/.gitignore_global ] && unlink ~/.gitignore_global
[ -f ~/src/dotfiles/.gitignore_global ] && ln -s ~/src/dotfiles/.gitignore_global ~/.gitignore_global

[ -h ~/.eslintrc ] && unlink ~/.eslintrc
[ -f ~/src/dotfiles/.eslintrc ] && ln -s ~/src/dotfiles/.eslintrc ~/.eslintrc

# [ -h ~/.stylelintrc ] && unlink ~/.stylelintrc
# [ -f ~/src/dotfiles/.stylelintrc ] && ln -s ~/src/dotfiles/.stylelintrc ~/.stylelintrc

# [ -h ~/.babelrc ] && unlink ~/.babelrc
# [ -f ~/src/dotfiles/.babelrc ] && ln -s ~/src/dotfiles/.babelrc ~/.babelrc

[ -h ~/.zshrc ] && unlink ~/.zshrc
[ -f ~/src/dotfiles/.zshrc ] && ln -s ~/src/dotfiles/.zshrc ~/.zshrc

[ -h ~/.hyper.js ] && unlink ~/.hyper.js
[ -f ~/src/dotfiles/.hyperterm.js ] && ln -s ~/src/dotfiles/.hyperterm.js ~/.hyper.js

[ -h ~/bin ] && unlink ~/bin
[ -d ~/src/dotfiles/bin ] && ln -s ~/src/dotfiles/bin ~/

# Setup iTerm2 dynamic profile
[ -h ~/Library/Application Support/iTerm2/DynamicProfiles/jasonl-seti.plist ] && unlink ~/Library/Application Support/iTerm2/DynamicProfiles/jasonl-seti.plist
[ -d ~/Library/Application Support/iTerm2/DynamicProfiles ] && ln -s ~/src/dotfiles/jasonl-seti.plist ~/Library/Application Support/iTerm2/DynamicProfiles/jasonl-seti.plist

# Setup Atom
# ATOM_PACKAGES=\
# sync-settings
# [ -f /usr/local/bin/apm ] apm install $ATOM_PACKAGES
#
# @NOTE
# To restore from the backup, there are some manual steps to take:
#
# 1. Open Sync Settings configuration in Atom Settings.
# 2. Create a new personal access token which has the gist scope
#    and be sure to activate permissions: Gist -> create gists.
# 3. Copy the access token to Sync Settings configuration.
# 4. Copy the gist id (last part of url after the username) to Sync Settings configuration.
# 5. Restore backup
